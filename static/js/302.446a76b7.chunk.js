"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[302],{355:function(e,t,n){n.d(t,{l:function(){return f}});var r=n(861),a=n(671),u=n(144),i=n(274),s=n(359),c=n(757),o=n.n(c),l=n(243);l.Z.defaults.baseURL="https://api.themoviedb.org/3/";var p=(0,s.Z)("API_KEY"),h=function(){function e(){(0,a.Z)(this,e),Object.defineProperty(this,p,{writable:!0,value:"9167ee7ecb36a9f774a46dedb9c5a8cc"}),this.BASE_URL="https://image.tmdb.org/t/p/w500",this.defaultImg="https://png.pngtree.com/png-vector/20200812/ourmid/pngtree-film-noir-set-clapperboard-png-image_2324477.jpg"}return(0,u.Z)(e,[{key:"getPopularMovies",value:function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams({api_key:(0,i.Z)(this,p)[p],page:t}),e.next=3,l.Z.get("trending/movie/day",{params:n});case 3:return r=e.sent,a=r.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovieByQuery",value:function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams({api_key:(0,i.Z)(this,p)[p],query:t,page:n,language:"en-US",include_adult:!1}),e.next=3,l.Z.get("/search/movie",{params:r});case 3:return a=e.sent,u=a.data,e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMovieById",value:function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams({api_key:(0,i.Z)(this,p)[p],language:"en-US",include_adult:!1}),e.prev=1,e.next=4,l.Z.get("movie/".concat(t,"?").concat(n));case 4:return r=e.sent,a=r.data,e.abrupt("return",a);case 9:if(e.prev=9,e.t0=e.catch(1),!e.t0.response||404!==e.t0.response.status){e.next=13;break}throw new Error("Oops, there is no movie with that name");case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovieCast",value:function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams({api_key:(0,i.Z)(this,p)[p],language:"en-US"}),e.next=3,l.Z.get("movie/".concat(t,"/credits?").concat(n));case 3:return r=e.sent,a=r.data,e.abrupt("return",a.cast);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovieReview",value:function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams({api_key:(0,i.Z)(this,p)[p],language:"en-US"}),e.next=3,l.Z.get("movie/".concat(t,"/reviews?").concat(n));case 3:return r=e.sent,a=r.data,e.abrupt("return",a.results);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),f=new h},894:function(e,t,n){n.d(t,{u:function(){return i}});var r="Button_btnContainer__MuD9z",a="Button_button__wiIYs",u=n(184),i=function(e){var t=e.onBtnClick;return(0,u.jsx)("div",{className:r,children:(0,u.jsx)("button",{className:a,type:"button",onClick:t,children:"Load more"})})}},569:function(e,t,n){n.d(t,{Q:function(){return s}});var r=n(689),a=n(87),u=n(355),i=n(184),s=function(e){var t=e.movies,n=(0,r.TH)();return(0,i.jsx)("ul",{children:t.map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")}),"")}();return(0,i.jsxs)("li",{children:[(0,i.jsxs)("p",{children:[e.title," ",(0,i.jsx)("span",{children:e.vote_average.toFixed(2)})]}),(0,i.jsx)(a.rU,{to:"/movies/".concat(e.id),state:{from:n},children:(0,i.jsx)("img",{src:e.poster_path?"".concat(u.l.BASE_URL).concat(e.poster_path):u.l.defaultImg,alt:e.title,width:"200"})})]},t)}))})}},302:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var r=n(433),a=n(439),u=n(355),i=n(791),s=n(87),c="Search_form__KGT+E",o="Search_label__R648n",l="Search_input__PXR0c",p="Search_btn__M-SxT",h=n(184),f=function(e){var t=e.onSubmit;return(0,h.jsx)("div",{children:(0,h.jsxs)("form",{className:c,onSubmit:function(e){e.preventDefault();var n=e.target.elements.query;t(n.value),e.target.reset()},children:[(0,h.jsx)("label",{className:o,children:(0,h.jsx)("input",{className:l,type:"text",name:"query"})}),(0,h.jsx)("button",{type:"submit",className:p,children:"Search"})]})})},v=n(569),d=n(894),m="Movies_main__zVRJ-",g=function(){var e,t=(0,i.useState)([]),n=(0,a.Z)(t,2),c=n[0],o=n[1],l=(0,i.useState)(1),p=(0,a.Z)(l,2),g=p[0],_=p[1],x=(0,i.useState)(null),y=(0,a.Z)(x,2),w=y[0],b=y[1],S=(0,s.lr)(),Z=(0,a.Z)(S,2),k=Z[0],j=Z[1],U=null!==(e=k.get("query"))&&void 0!==e?e:"";(0,i.useEffect)((function(){""!==U&&u.l.getMovieByQuery(U,g).then((function(e){o((function(t){var n=(0,r.Z)(t);return e.results.forEach((function(e){n.some((function(t){return t.id===e.id}))||n.push(e)})),n})),b(e.total_results)}))}),[U,g]);return(0,h.jsxs)("main",{className:m,children:[(0,h.jsx)(f,{onSubmit:function(e){_(1),o([]),j(""!==e?{query:e}:{})}}),c.length>0&&U&&(0,h.jsx)(v.Q,{movies:c}),w/20>=g&&(0,h.jsx)(d.u,{text:"Load more",status:"search",onClick:function(){_((function(e){return e+1}))}})]})}}}]);
//# sourceMappingURL=302.446a76b7.chunk.js.map