"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[302],{355:function(e,t,r){r.d(t,{l:function(){return v}});var n=r(861),a=r(671),s=r(144),i=r(274),u=r(359),c=r(757),o=r.n(c),p=r(243);p.Z.defaults.baseURL="https://api.themoviedb.org/3/";var l=(0,u.Z)("API_KEY"),h=function(){function e(){(0,a.Z)(this,e),Object.defineProperty(this,l,{writable:!0,value:"9167ee7ecb36a9f774a46dedb9c5a8cc"}),this.BASE_URL="https://image.tmdb.org/t/p/w500",this.defaultImg="https://png.pngtree.com/png-vector/20200812/ourmid/pngtree-film-noir-set-clapperboard-png-image_2324477.jpg"}return(0,s.Z)(e,[{key:"getPopularMovies",value:function(){var e=(0,n.Z)(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams({api_key:(0,i.Z)(this,l)[l],page:t}),e.next=3,p.Z.get("trending/movie/day",{params:r});case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovieByQuery",value:function(){var e=(0,n.Z)(o().mark((function e(t,r){var n,a,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URLSearchParams({api_key:(0,i.Z)(this,l)[l],query:t,page:r,language:"en-US",include_adult:!1}),e.next=3,p.Z.get("/search/movie",{params:n});case 3:return a=e.sent,s=a.data,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getMovieById",value:function(){var e=(0,n.Z)(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams({api_key:(0,i.Z)(this,l)[l],language:"en-US",include_adult:!1}),e.prev=1,e.next=4,p.Z.get("movie/".concat(t,"?").concat(r));case 4:return n=e.sent,a=n.data,e.abrupt("return",a);case 9:if(e.prev=9,e.t0=e.catch(1),!e.t0.response||404!==e.t0.response.status){e.next=13;break}throw new Error("Oops, there is no movie with that name");case 13:throw e.t0;case 14:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovieCast",value:function(){var e=(0,n.Z)(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams({api_key:(0,i.Z)(this,l)[l],language:"en-US"}),e.next=3,p.Z.get("movie/".concat(t,"/credits?").concat(r));case 3:return n=e.sent,a=n.data,e.abrupt("return",a.cast);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMovieReview",value:function(){var e=(0,n.Z)(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams({api_key:(0,i.Z)(this,l)[l],language:"en-US"}),e.next=3,p.Z.get("movie/".concat(t,"/reviews?").concat(r));case 3:return n=e.sent,a=n.data,e.abrupt("return",a.results);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),v=new h},43:function(e,t,r){r.d(t,{Q:function(){return l}});var n=r(689),a=r(87),s=r(355),i="MovieL_ul__6PWdY",u="MovieL_li__Uv8sA",c="MovieL_p__qcCND",o="MovieL_img__I+V8m",p=r(184),l=function(e){var t=e.movies,r=(0,n.TH)();return(0,p.jsx)("ul",{className:i,children:t.map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")}),"")}();return(0,p.jsxs)("li",{className:u,children:[(0,p.jsxs)("p",{className:c,children:[e.title," ",(0,p.jsx)("span",{children:e.vote_average.toFixed(2)})]}),(0,p.jsx)(a.rU,{to:"/movies/".concat(e.id),state:{from:r},children:(0,p.jsx)("img",{className:o,src:e.poster_path?"".concat(s.l.BASE_URL).concat(e.poster_path):s.l.defaultImg,alt:e.title,width:"200"})})]},t)}))})}},302:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var n=r(433),a=r(439),s=r(355),i=r(791),u=r(87),c="Search_form__KGT+E",o="Search_label__R648n",p="Search_input__PXR0c",l="Search_btn__M-SxT",h=r(184),v=function(e){var t=e.onSubmit;return(0,h.jsx)("div",{children:(0,h.jsxs)("form",{className:c,onSubmit:function(e){e.preventDefault();var r=e.target.elements.query;t(r.value),e.target.reset()},children:[(0,h.jsx)("label",{className:o,children:(0,h.jsx)("input",{className:p,type:"text",name:"query"})}),(0,h.jsx)("button",{type:"submit",className:l,children:"Search"})]})})},f=r(43),m="Movies_main__zVRJ-",d=function(){var e,t=(0,i.useState)([]),r=(0,a.Z)(t,2),c=r[0],o=r[1],p=(0,i.useState)(1),l=(0,a.Z)(p,2),d=l[0],_=l[1],g=(0,u.lr)(),y=(0,a.Z)(g,2),w=y[0],x=y[1],b=null!==(e=w.get("query"))&&void 0!==e?e:"";return(0,i.useEffect)((function(){""!==b&&s.l.getMovieByQuery(b,d).then((function(e){o((function(t){var r=(0,n.Z)(t);return e.results.forEach((function(e){r.some((function(t){return t.id===e.id}))||r.push(e)})),r}))}))}),[b,d]),(0,h.jsxs)("main",{className:m,children:[(0,h.jsx)(v,{onSubmit:function(e){_(1),o([]),x(""!==e?{query:e}:{})}}),c.length>0&&b&&(0,h.jsx)(f.Q,{movies:c})]})}}}]);
//# sourceMappingURL=302.4d3dbf7e.chunk.js.map